---
import { RelatedWorksAccordion } from '@/components/RelatedWorksAccordion'
import PageLayout from '@/layouts/PageLayout.astro'
import { getEntry } from 'astro:content'

const {
  title,
  description,
  author,
  minutesRead,
  lastModifiedTime,
  relatedWorks,
} = Astro.props

const works = relatedWorks ? await getEntry(relatedWorks) : null
---

<PageLayout>
  <h1 class="pt-12">{title}</h1>
  <p>{description}</p>
  <p class="opacity-75">Contributors: {author}</p>
  <p class="mb-4 text-sm opacity-75">
    Last modified: {lastModifiedTime} Â· {minutesRead}
  </p>
  <hr />
  <slot />
  {works && <RelatedWorksAccordion works={works} client:visible />}
</PageLayout>

---
import { RelatedWorksAccordion } from '@/components/RelatedWorksAccordion'
import PageLayout from '@/layouts/PageLayout.astro'
import { getEntry } from 'astro:content'

const {
  title,
  description,
  author,
  minutesRead,
  lastModifiedTime,
  relatedWorks,
} = Astro.props

const works = await getEntry(relatedWorks)

const data = await works.data
---

<PageLayout>
  <h1 class="pt-12">{title}</h1>
  <p>{description}</p>
  <p class="opacity-75">Contributors: {author}</p>
  <p class="mb-4 text-sm opacity-75">
    Last modified: {lastModifiedTime} Â· {minutesRead}
  </p>
  <hr />
  <slot />
  <h2 class="mt-20 mb-6 text-2xl">References</h2>
  <RelatedWorksAccordion works={data} worksId={works.id} client:load />
</PageLayout>
